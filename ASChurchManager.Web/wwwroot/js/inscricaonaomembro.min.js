function CarregarMembro(){LimparCampos();let n={idPresenca:$("#Presenca").val(),naoMembro:!0};$.ajaxPost(urlBuscarLista,n,function(n){if(n.status=="OK"){let t=n.data;CarregarTable(t)}else $.bsMessageError("Atenção",n.Message)})}function CarregarTable(n){let i=document.getElementById("tbMembro").getElementsByTagName("tbody")[0];if($(i).empty(),n.length>0)for(var t=0;t<n.length;t++)IncluirLinhaTabela(n[t],t);else{let n=i.insertRow(0);n.className="jtable-data-row";$.incluirCelulasTabela(n,0,"100%","Não há inscrições cadastradas para o Curso/Eventos",6)}}function IncluirLinhaTabela(n,t){let r=$("#Valor").val(),u=document.getElementById("tbMembro").getElementsByTagName("tbody")[0],i=u.insertRow(t);if(i.className="jtable-data-row"+(t%2==0?" jtable-row-even":""),$.incluirCelulasTabela(i,0,null,n.Id),$.incluirCelulasTabela(i,1,null,n.Nome),$.incluirCelulasTabela(i,2,null,n.CPF),$.incluirCelulasTabela(i,3,null,n.Igreja),$.incluirCelulasTabela(i,4,null,n.Cargo),!isReadOnly){let t="";r>0&&(t+=`<input type="button" value="${n.Pago?"Pago":"Não Pago"}" class="btn ${n.Pago?"btn-primary":"btn-secondary"} btn-sm" style=";width:90px;" onclick="AtualizarPago(${n.Id}, ${n.Pago}, this);">&nbsp;&nbsp;`);t+=`<input type="button" value="Excluir" class="btn btn-danger btn-sm" style="width:90px" onclick="ExcluirRow(${n.Id}, this);">`;$.incluirCelulasTabela(i,5,null,t)}}function LimparCampos(){$("#Nome").val("");$("#Cpf").val("");$("#Igreja").val("");$("#Cargo").val("");$("#Pago").prop("checked",!1)}function ExcluirRow(n,t){let i="Deseja excluir o Membro da Lista?";$("#PermiteInscricoes").val()==="False"&&(i="Inscrições já encerradas, após a exclusão não será possivel reinscrever o Membro no Curso/Evento.<br />Deseja realmente excluir o Membro da Lista?");$.showYesNoAlert(i,"Excluir Inscrição",function(){let i={id:n};$.ajaxPost(urlExcluir,i,function(n){if(n.status=="OK"){var r=t.parentNode.parentNode.sectionRowIndex,i=document.getElementById("tbMembro").getElementsByTagName("tbody")[0];i.deleteRow(r);let n=$("#tbMembro tr").length-1;if(n<=0){let n=i.insertRow(0);n.className="jtable-data-row";$.incluirCelulasTabela(n,0,"100%","Não há inscrições cadastrados para o Curso/Eventos",6)}}else $.bsMessageError("Atenção",n.Message)})})}function AtualizarPago(n,t,i){let r={id:n,pago:!t};$.ajaxPost(urlAtualizarPago,r,function(r){r.status=="OK"?(t===!0?($(i).val("Não Pago"),$(i).removeClass("btn-primary"),$(i).addClass("btn-secondary")):($(i).val("Pago"),$(i).removeClass("btn-secondary"),$(i).addClass("btn-primary")),$(i).attr("onclick",`AtualizarPago(${n}, ${!t}, this)`)):$.bsMessageError("Atenção",r.Message)})}function HabilitarCampos(n){n==="Cpf"?($("#CpfFiltro").show(),$("#Conteudo").hide()):($("#Conteudo").show(),$("#CpfFiltro").hide())}function HabilitarCampos(n){n==="CongregacaoId"?($("#CongregacaoSelecionado").show(),$("#Conteudo").hide(),$("#CpfFiltro").hide()):n==="Cpf"?($("#CpfFiltro").show(),$("#CongregacaoSelecionado").hide(),$("#StatusMembroSelecionado").hide(),$("#Conteudo").hide()):($("#Conteudo").show(),$("#StatusMembroSelecionado").hide(),$("#CongregacaoSelecionado").hide(),$("#CpfFiltro").hide())}function ValidarFormulario(){var n="";return $("span[id*=-error]").each(function(t,i){n+=$(i).text()+"<br>"}),n}let isReadOnly=!1;$(()=>{isReadOnly=$("#IsReadOnly").val().toLowerCase()=="true",$("#divFiltro").hide(),$("#btnAddLista").click(n=>{n.preventDefault;let i=$("#frmInscricao");if(i.valid()){let n={idPresenca:$("#Presenca").val(),nome:$("#Nome").val(),cpf:$("#Cpf").val(),igreja:$("#Igreja").val(),cargo:$("#Cargo").val(),pago:$("#Pago").prop("checked")};$.ajaxPost(urlIncluir,n,function(n){if(n.status=="OK"){let t=n.data;CarregarTable(t);LimparCampos()}else $.bsMessageError("Atenção",n.Message)})}else{var t=ValidarFormulario();t!=null&&t!=undefined&&t!=""&&$.alertError("Inscrições",t)}}),$("#btnCancLista").click(n=>{n.preventDefault(),LimparCampos(),$("#Nome").focus()}),HabilitarCampos($("#Filtro").val()),$("#Filtro").change(function(n){$("#Conteudo").val("");HabilitarCampos($("#Filtro").val());n.preventDefault()}),$("#Conteudo").keypress(function(n){return $("#Filtro").val()==="Id"?(n.keyCode===16&&(isShift=!0),(n.keyCode>=48&&n.keyCode<=57||n.keyCode===8||n.keyCode<=37)&&isShift===!1)?!0:!1:!0}),$("#btnPesquisar").click(function(n){if(n.preventDefault(),$("#Presenca").val()!=null&&$("#Presenca").val()!=""){var t=$("#Conteudo").val();$("#Filtro").val()==="CongregacaoId"?t=$("#CongregacaoSelecionado").val():$("#Filtro").val()==="Cpf"&&(t=$("#Cpf").val());let n={idPresenca:$("#Presenca").val(),filtro:$("#Filtro").val(),naoMembro:$("#NaoMembro").val(),conteudo:t};$.ajaxPost(urlBuscarLista,n,function(n){if(n.status=="OK"){let t=n.data;CarregarTable(t)}else $.bsMessageError("Atenção",n.Message)})}}),$("#btnPesquisar").click()});
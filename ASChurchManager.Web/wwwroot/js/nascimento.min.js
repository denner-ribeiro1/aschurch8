function excluirNascimento(){var n={id:$("#lnkExcluir").data("nascimentoid")};$.showYesNoAlert('<h3 style="color:red">Você tem certeza que deseja excluir este Nascimento?<\/br>Após a confirmação NÃO será mais possível recuperar o Nascimento.<\/h3>',"Nascimento",function(){$.ajaxPost(urlExcluir,n,function(n){n.status==="OK"?window.location=n.url:$.alertError("Nascimento",n.mensagem)})})}function buscarMembro(n,t){if(n>0){var i={MembroId:n};t="#"+t;$.ajaxPost("/Secretaria/Membro/BuscarMembro",i,function(n){$(t).val("");n.Id===0?($.bsMessageError("Atenção","Membro não cadastrado!"),$(this).val("")):n.Id>0&&$(t).val(n.Nome)})}}function HabilitaDesabilitaCampos(n,t,i,r){n?($("#"+t).show(),$("label[for="+i+"]").hide(),$("#"+i).removeAttr("readonly"),$("#"+i).addClass("alinhar"),$("#"+i).focus(),$("#"+r).attr("readonly","readonly")):($("#"+t).hide(),$("label[for="+i+"]").show(),$("#"+i).attr("readonly","readonly"),$("#"+i).removeClass("alinhar"),$("#"+r).removeAttr("readonly"),$("#"+r).focus())}$(function(){"use strict";var t,n;actionName==="Details"?(HabilitaDesabilitaCampos(!1,"lnkPastorId","PastorId","Pastor"),HabilitaDesabilitaCampos(!1,"lnkIdMae","IdMembroMae","NomeMae"),HabilitaDesabilitaCampos(!1,"lnkIdPai","IdMembroPai","NomePai")):(t=$("#hdnUsuarioSede").val().toLowerCase()==="true",$("#lnkBuscarCongregacao").removeAttr("class"),t===!1?($("#CongregacaoId").attr("readonly","readonly"),$("#lnkBuscarCongregacao").attr("class","readonly")):$("#lnkBuscarCongregacao").popUp("","Congregacao","CongregacaoId"),$("#PastorId").removeAttr("readonly"),$("#Pastor").removeAttr("readonly"),$("label[for=PastorId]").hide(),$("#PastorId").addClass("alinhar"),$("#lnkPastorId").show(),$("#PastorMembro").prop("checked")&&($("#PastorId").attr("readonly","readonly"),$("#Pastor").attr("readonly","readonly"),$("label[for=PastorId]").show(),$("#PastorId").removeClass("alinhar"),$("#lnkPastorId").hide()),HabilitaDesabilitaCampos($("#MaeMembro").prop("checked"),"lnkIdMae","IdMembroMae","NomeMae"),HabilitaDesabilitaCampos($("#PaiMembro").prop("checked"),"lnkIdPai","IdMembroPai","NomePai"),$("#CongregacaoId").change(function(){var n=$(this).val(),t;n>0&&(t={CongregacaoId:n},$.ajaxPost("/Secretaria/Congregacao/BuscarCongregacao",t,function(n){$("#CongregacaoNome").val("");n.Id==0?($.bsMessageError("Atenção","Código inválido!"),$(this).val("")):n.Id>0&&($("#CongregacaoNome").val(n.Nome),$("#PastorId").val(n.PastorResponsavelId),$("#Pastor").val(n.PastorResponsavelNome),$("#PastorId").attr("readonly","readonly"),$("#Pastor").attr("readonly","readonly"))}))}),n={TipoMembro:3,Status:1},$("#lnkPastorId").popUp("Pesquisar Pastor","Membro","PastorId",n),$("#PastorId").change(function(){if(!$("#PastorId").is("[readonly]")){var n=$(this).val();(n!==""||n===null||n===undefined)&&(buscarMembro(n,"Pastor"),($("#Pastor").val()!==""||$("#Pastor").val()!==null||$("#Pastor").val()!==undefined)&&$("#PastorId").attr("readonly","readonly"))}}),$("#Pastor").change(function(){($(this).val()===""||$(this).val()===null||$(this).val()===undefined)&&$("#PastorId").removeAttr("readonly")}),$("#PastorMembro").change(function(){var n,t;$("#PastorMembro").prop("checked")===!1?($("#PastorId").removeAttr("readonly"),$("#Pastor").removeAttr("readonly"),$("label[for=PastorId]").hide(),$("#lnkPastorId").show(),$("#PastorId").addClass("alinhar"),$("#PastorId").val(""),$("#Pastor").val("")):($("#PastorId").attr("readonly","readonly"),$("#Pastor").attr("readonly","readonly"),$("label[for=PastorId]").show(),$("#PastorId").removeClass("alinhar"),$("#lnkPastorId").hide(),n=$("#CongregacaoId").val(),n>0&&(t={CongregacaoId:n},$.ajaxPost("/Secretaria/Congregacao/BuscarCongregacao",t,function(n){$("#CongregacaoNome").val("");n.Id===0?($.bsMessageError("Atenção","Código inválido!"),$(this).val("")):n.Id>0&&($("#CongregacaoNome").val(n.Nome),$("#PastorId").val(n.PastorResponsavelId),$("#Pastor").val(n.PastorResponsavelNome),$("#PastorId").attr("readonly","readonly"),$("#Pastor").attr("readonly","readonly"))})))}),$("#lnkIdPai").popUp("Pesquisar - Pai da Criança","Membro","IdMembroPai",n),$("#IdMembroPai").change(function(){var n=$(this).val();buscarMembro(n,"NomePai")}),$("#PaiMembro").change(function(){HabilitaDesabilitaCampos($("#PaiMembro").prop("checked"),"lnkIdPai","IdMembroPai","NomePai");$("#PaiMembro").prop("checked")?$("#NomePai").val(""):$("#IdMembroPai").val("")}),$("#lnkIdMae").popUp("Pesquisar - Mãe da Criança","Membro","IdMembroMae",n),$("#IdMembroMae").change(function(){var n=$(this).val();buscarMembro(n,"NomeMae")}),$("#MaeMembro").change(function(){HabilitaDesabilitaCampos($("#MaeMembro").prop("checked"),"lnkIdMae","IdMembroMae","NomeMae");$("#MaeMembro").prop("checked")?$("#NomeMae").val(""):$("#IdMembroMae").val("")}),$("#btnSalvar").click(function(n){n.preventDefault;var t="Deseja realmente criar um novo Nascimento?";actionName==="Edit"&&(t="Deseja realmente atualizar o Nascimento?");$.showYesNoAlert(t,"Nascimento",function(){var n=$("#frmNascimento"),t=n.attr("action");n.valid()&&$.ajaxPostForm(t,$("#frmNascimento"),function(n){n.status==="OK"?window.location=n.url:$.alertError("Nascimento",n.msg)})})}))});
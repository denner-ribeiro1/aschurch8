function HabilitarCampos(n){n==="CongregacaoOrigem"?($("#congregacao").show(),$("#padrao").hide(),$("#tipoCarta").hide()):n==="TipoCarta_Status"?($("#tipoCarta").show(),$("#congregacao").hide(),$("#padrao").hide()):($("#padrao").show(),$("#congregacao").hide(),$("#tipoCarta").hide())}function botao(n,t,i,r){var u="";return u='<button type="button" class="btn btn-info btn-sm" id="btnDetalhes" onclick = "javascript:window.location.href=\''+urlDetalhes+"/"+n+'\'"; return false;>     <span class="glyphicon glyphicon-list-alt"><\/span> Detalhes<\/button>',i!=="Cancelado"&&(u+='<span>&nbsp<\/span><a href="javascript:void(0)" id="lnkPrint" onclick="Imprimir(this);return false;" class="btn btn-warning btn-sm" data-templateid="'+t+'"    data-targetmodel="Carta" data-id="'+n+'">    <span class="glyphicon glyphicon-print" aria-hidden="true"><\/span> Imprimir<\/a>'),r&&(u+='<span>&nbsp<\/span><button type="button" class="btn btn-primary btn-sm" id="btnAprovar" onclick = "javascript:window.location.href=\''+urlAprovar+"/"+n+'\'"; return false;>     <span class="glyphicon glyphicon-ok"><\/span> Aprovar<\/button>'),u}function Imprimir(n){var t=$(n).data("templateid"),i=$(n).data("targetmodel"),r=$(n).data("id");$.showYesNoAlert("Deseja imprimir esta Carta ?","Imprimir Carta",function(){var n=urlPrint+"?templateId="+t+"&targetModel="+i+"&modelId="+r;$.downloadArquivo(n,null)})}$(function(){var n=$.getQuerystringValue("Status");n!==""&&($("#Filtro").val("TipoCarta_Status"),$("#StatusCartaSelecionado").val(n));HabilitarCampos($("#Filtro").val());$("#Filtro").change(function(n){$("#Conteudo").val("");HabilitarCampos($("#Filtro").val());n.preventDefault()});$("#Conteudo").keypress(function(n){return $("#Filtro").val()==="Id"?(n.keyCode===16&&(isShift=!0),(n.keyCode>=48&&n.keyCode<=57||n.keyCode===8||n.keyCode<=37)&&isShift===!1)?!0:!1:!0});$("#grdCarta").jtable({paging:!0,pageSize:15,sorting:!0,pageSizeChangeArea:!1,defaultSorting:"Id DESC",actions:{listAction:urlList},messages:{noDataAvailable:"Não existem Cartas a serem exibidos no momento!"},fields:{Id:{title:"Código",width:"6%",key:!0,columnResizable:!1},Nome:{title:"Nome",width:"20%",key:!1,columnResizable:!1},CongregacaoOrigem:{title:"Congregação Origem",width:"15%",key:!1,columnResizable:!1},CongregacaoDestino:{title:"Congregação Destino",width:"15%",key:!1,columnResizable:!1},TipoCarta:{title:"Tipo",width:"6%",key:!1,columnResizable:!1},StatusCarta:{title:"Status",width:"6%",key:!1,columnResizable:!1},DataValidade:{title:"Validade",width:"6%",key:!1,columnResizable:!1,listClass:"Centeralign",display:function(n){var t=n.record.DataValidade.substring(0,10).split("-");return t[2]+"/"+t[1]+"/"+t[0]}},Botoes:{title:"",width:"25%",sorting:!1,display:function(n){return botao(n.record.Id,n.record.TemplateId,n.record.StatusCarta,n.record.AprovarCarta)}}}});$("#btnPesquisar").click(function(n){n.preventDefault();var i="",t=$("#Conteudo").val();$("#Filtro").val()==="CongregacaoOrigem"?t=$("#CongregacaoSelecionado").val():$("#Filtro").val()==="TipoCarta_Status"&&(t=$("#TipoCartaSelecionado").val(),i=$("#StatusCartaSelecionado").val());$("#grdCarta").jtable("load",{filtro:$("#Filtro").val(),conteudo:t,status:i})});$("#btnPesquisar").click()});
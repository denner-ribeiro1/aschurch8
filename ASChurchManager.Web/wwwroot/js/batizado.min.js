function AddNewLine(n,t,i,r){var s=$("#tbPastor tbody")[0],u,f,e,h,o;s!=null&&(pastorCeleb.length==0&&$("#tbPastor tbody tr").remove(),u=s.insertRow(-1),u.className="jtable-data-row"+(r%2==0?" jtable-row-even":""),f=u.insertCell(0),f.width="10%",f.innerHTML=n,e=u.insertCell(1),e.width="70%",e.innerHTML=t,i===!1&&(h='<button type="button" class="btn btn-danger btn-sm" id="btnExcluir" onclick = "ExcluirPastor('+n+')"; return false;>     <span class="glyphicon glyphicon-list-alt"><\/span> Excluir<\/button>',o=u.insertCell(2),o.width="10%",o.innerHTML=h))}function ExcluirPastor(n){$.showYesNoAlert("Deseja excluir o Pastor Celebrante?","Configuração de Batismo",function(){for(var t=0;t<pastorCeleb.length;t++)pastorCeleb[t].MembroId==n&&pastorCeleb.splice(t,1);if($("#tbPastor tbody tr").remove(),pastorCeleb.length===0){var r=$("#tbPastor tbody")[0],u=r.insertRow(-1),i=u.insertCell(0);i.colSpan=3;i.width="100%";i.innerHTML="Não existem Pastores cadastrados para o Batismo"}else for(t=0;t<pastorCeleb.length;t++)AddNewLine(pastorCeleb[t].MembroId,pastorCeleb[t].Nome,pastorCeleb[t].IsReadOnly,t)})}$(function(){"use strict";var n,t,i;for($("#HoraBatismo").mask("99:99"),$("#tbPastor tbody tr").remove(),n=0;n<pastorCeleb.length;n++)AddNewLine(pastorCeleb[n].MembroId,pastorCeleb[n].Nome,pastorCeleb[n].IsReadOnly,n);t={TipoMembro:3,Status:1};$("#lnkBuscarPastorCelebrante").popUp("Pesquisar Pastor","Membro","MembroId",t);$("#MembroId").blur(function(){var n=$(this).val(),t;if(n>0){if(pastorCeleb.find(t=>t.MembroId===n)!=null)return $.alertError("Configuração de Batismo","Pastor já adicionado!"),$("#MembroId").val(""),$("#Nome").val(""),!1;t={MembroId:n};$.ajaxPost("/Secretaria/Batismo/BuscarMembro",t,function(n){$("#Nome").val("");n.Status==="OK"?$("#Nome").val(n.Nome):($("#MembroId").val(""),$.bsMessageError("Atenção",n.Msg))})}});i=$("#hdnUsuarioSede").val().toLowerCase()==="true";i===!1?$("#DataPrevistaBatismo").attr("readonly","readonly"):$("#DataPrevistaBatismo").removeAttr("readonly");$("#DataBatismo").change(function(){var n=$("#DataBatismo").val().split("/"),r=new Date(n[2],n[1]-1,n[0]),i,t;return n=$("#DataMaximaCadastro").val().split("/"),i=new Date(n[2],n[1]-1,n[0]),t=$(document).find("[data-valmsg-for='DataBatismo']"),t.html(""),i>r?(t.html('<span id="DataBatismo-error" class="">A Data do Batismo deve ser maior que a Data máxima para o cadastro de Batismo<\/span>'),$("#DataBatismo").val(""),!1):void 0});$(document).on("click","#btnAddPastor",{},function(n){var t,i,r;if(n.preventDefault(),t={MembroId:$("#MembroId").val(),Nome:$("#Nome").val(),IsReadOnly:!1},i=$(document).find("[data-valmsg-for='MembroId']"),i.html(""),r=!1,(t.MembroId==null||t.MembroId==undefined||t.MembroId==0)&&(r=!0,i.html('<span id="Id-error" class="">Selecione um Pastor<\/span>')),r)return!1;if(pastorCeleb.find(n=>n.MembroId===t.MembroId)!=null)return $.alertError("Configuração de Batismo","Pastor já adicionado!"),$("#MembroId").val(""),$("#Nome").val(""),!1;AddNewLine(t.MembroId,t.Nome,!1,pastorCeleb.length);pastorCeleb.push(t);$("#MembroId").val("");$("#Nome").val("")});$(document).on("click","#btnSalvar",{},function(n){var t,u,f,i,r;if(n.preventDefault,t=$("#DataBatismo").val().split("/"),u=new Date(t[2],t[1]-1,t[0]),t=$("#DataMaximaCadastro").val().split("/"),f=new Date(t[2],t[1]-1,t[0]),i=$(document).find("[data-valmsg-for='DataBatismo']"),i.html(""),f>u)return i.html('<span id="DataBatismo-error" class="">A Data do Batismo deve ser maior que a data máxima para o cadastro de batismo<\/span>'),$("#DataBatismo").val(""),$.alertError("Batizado","A Data do Batismo deve ser maior que a data máxima para o cadastro de batismo"),!1;r="Deseja realmente criar uma nova Configuração do Batismo?";$("#Acao").val()==="Update"&&(r="Deseja realmente atualizar a Configuração do Batismo?");$.showYesNoAlert(r,"Configuração de Batismo",function(){$("#PastoresCelebrantesJSON").val(JSON.stringify(pastorCeleb));var n=$("#frmBatismo"),t=n.attr("action");n.valid()&&$.ajaxPostForm(t,$("#frmBatismo"),function(n){n.status==="OK"?window.location=n.url:$.alertError("Configuração de Batismo",n.msg)})})});$(document).on("click","#lnkExcluir",{},function(n){n.preventDefault();var t={id:$(this).data("membroid")};$.showYesNoAlert('<h3 style="color:red">Você tem certeza que deseja excluir esta Configuração de Batismo?<\/br>Após a confirmação todos os candidatos ao Batismo que estavam vinculados a esse batismo voltarão a ser Congregados.<\/h3>',"Configuração de Batismo",function(){$.ajaxPost(urlExcluir,t,function(n){n.status==="OK"?window.location=n.url:$.alertError("Configuração de Batismo",n.mensagem)})})})});
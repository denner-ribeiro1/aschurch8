function atualizarGrafico(){$.ajaxPost("/Secretaria/Dashboard/RetornaGrafico",null,function(n){$("#divGraficos").html(n,CarregarGrafico)},"html")}function CarregarGrafico(){var i=sit,r=$("#pieChart")[0].getContext("2d"),u=new Chart(r),n=[],t;$.each(i,function(t,i){switch(i.Situacao){case 1:n.push({value:i.Quantidade,color:"#00c0ef",highlight:"#00c0ef",label:"Ativos"});break;case 2:n.push({value:i.Quantidade,color:"#00a65a",highlight:"#00a65a",label:"Inativo"});break;case 3:n.push({value:i.Quantidade,color:"#f39c12",highlight:"#f39c12",label:"Pendente Aprovação"});break;case 4:n.push({value:i.Quantidade,color:"#f56954",highlight:"#f56954",label:"Não Aprovado"});break;case 5:n.push({value:i.Quantidade,color:"#3c8dbc",highlight:"#3c8dbc",label:"Mudou-se"});break;case 6:n.push({value:i.Quantidade,color:"#d2d6de",highlight:"#d2d6de",label:"Falecido"})}});t={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:1,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,responsive:!0,maintainAspectRatio:!1,legendTemplate:"<ul class='<%=name.toLowerCase()%>-legend'><% for (var i=0; i<segments.length; i++){%><li><span style='background-color:<%=segments[i].fillColor%>'><\/span><%if(segments[i].label){%><%=segments[i].label%><%}%><\/li><%}%><\/ul>",tooltipTemplate:"<%=value %> Membro(s) na Situação <%=label%>"};u.Doughnut(n,t)}$(function(){var n,t,i;atualizarGrafico();$("#grdMembrosPendentes").jtable({paging:!0,pageSize:10,sorting:!0,pageSizeChangeArea:!1,defaultSorting:"Id ASC",actions:{listAction:urlMembroPend},messages:{noDataAvailable:"Não existem Membros a serem exibidos no momento!"},fields:{Id:{title:"Código",width:"6%",key:!0,columnResizable:!1,display:function(n){return n.record.Status==="Não Aprovado"?`<a href='${urlDet}/${n.record.Id}'>${n.record.Id}</a>`:`<a href='${urlAprovar}/${n.record.Id}'>${n.record.Id}</a>`}},Nome:{title:"Nome",width:"18%",key:!1,columnResizable:!1},Congregacao:{title:"Congregação",width:"18%",key:!1,columnResizable:!1},Status:{title:"Status",width:"10%",key:!1,columnResizable:!0,display:function(n){return n.record.Status==="Não Aprovado"?`<span class="label label-danger">${n.record.Status}</span>`:`<span class="label label-warning">${n.record.Status}</span>`}}}});$("#grdMembrosPendentes").jtable("load");$("#grdCarta").jtable({paging:!0,pageSize:10,sorting:!0,pageSizeChangeArea:!1,defaultSorting:"Id DESC",actions:{listAction:urlCartaPend},messages:{noDataAvailable:"Não existem Cartas a serem exibidos no momento!"},fields:{Id:{title:"Código",width:"6%",key:!0,columnResizable:!1,display:function(n){return`<a href='${urlAprovCarta}/${n.record.Id}'>${n.record.Id}</a>`}},Nome:{title:"Nome",width:"20%",key:!1,columnResizable:!1},CongregacaoDestino:{title:"Congregação Destino",width:"15%",key:!1,columnResizable:!1}}});$("#grdCarta").jtable("load");n={paging:!1,pageSize:10,sorting:!1,pageSizeChangeArea:!1,actions:{listAction:urlEvento},messages:{noDataAvailable:"Não existem Eventos a serem exibidos no momento!"},fields:{CongregacaoNome:{title:"Congregação",width:"15%",key:!1,columnResizable:!1,display:function(n){return n.record.AlertarEventoMesmoDia===!0||n.record.Tipo===3?`${n.record.CongregacaoNome} <span class="label label-danger"> Obrigatório </span>`:n.record.CongregacaoNome}},TipoEventoDescr:{title:"Tipo",width:"10%",key:!1,columnResizable:!1},Descricao:{title:"Descrição",width:"45%",key:!0,columnResizable:!1},DataInicio:{title:"Data",width:"10%",key:!1,display:function(n){var t=n.record.DataInicio.substring(0,10).split("-");return`${t[2]}/${t[1]}/${t[0]}`},columnResizable:!1},HoraInicioStr:{title:"Inicio",width:"10%",key:!1,columnResizable:!1},HoraFinalStr:{title:"Fim",width:"10%",key:!1,columnResizable:!1}}};$("#gridEventos").jtable(n);$("#gridEventos").jtable("load",{tipoPesq:"N"});$("#gridEventosSede").jtable(n);$("#gridEventosSede").jtable("load",{tipoPesq:"S"});t=document.getElementById("calendar");i=new FullCalendar.Calendar(t,{plugins:["timeGrid"],defaultView:"timeGrid",locale:"pt-br",header:{left:"",center:"title",right:""},allDaySlot:!1,nowIndicator:!0,visibleRange:function(n){var t=new Date(n.valueOf()),i=new Date(n.valueOf());return t.setDate(t.getDate()),i.setDate(i.getDate()+6),{start:t,end:i}},events:function(n,t){$.ajax({cache:!1,type:"POST",url:"/Secretaria/Dashboard/Eventos",contentType:"application/json",dataType:"json",data:JSON.stringify({tipoPesq:""}),error:function(n,t,i){console.log(i);console.log(n.responseText)},success:function(n){var r=[],i,u;for(eventos=n.Records,i=0;i<eventos.length;i++){let f=new Date(eventos[i].DataInicio),n=eventos[i].HoraInicio.split(":");(n.length=3)?f.setHours(n[0],n[1],n[2]):(n.length=2)?f.setHours(n[0],n[1]):(n.length=1)&&f.setHours(n[0]);let e=new Date(eventos[i].DataFim),t=eventos[i].HoraFinal.split(":");(t.length=3)?e.setHours(t[0],t[1],t[2]):(t.length=2)?e.setHours(t[0],t[1]):(t.length=1)&&e.setHours(t[0]);u={id:eventos[i].Id,start:new Date(f),end:new Date(e),title:eventos[i].AlertarEventoMesmoDia===!0||eventos[i].Tipo===3?"* "+eventos[i].Descricao:eventos[i].Descricao,color:eventos[i].BgColor,tipo:eventos[i].Tipo};r.push(u)}t(r)}})}});i.render()});
function reloadCalendar(){calendar.refetchEvents()}function initCalendar(){var n=document.getElementById("calendar");calendar=new FullCalendar.Calendar(n,{customButtons:{addItem:{text:"Novo Evento",click:function(){var n=urlCreate+"?clickDate=add";$.popUpUrl(n,600,900,function(){reloadCalendar()})}}},plugins:["bootstrap","interaction","dayGrid","timeGrid","list"],themeSystem:"spacelab",header:{left:"prev,next today addItem",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},navLinks:!0,editable:!1,eventLimit:!0,locale:"pt-br",lazyFetching:!0,nowIndicator:!0,allDaySlot:!1,events:function(n,t){var i={start:n.startStr,end:n.endStr};$.ajaxPost(urlGetEventos,i,function(n){var o=[],i,s,u,r,e;for(eventos=n.eventos,i=0;i<eventos.length;i++){let r=new Date(eventos[i].DataInicio),n=eventos[i].HoraInicio.split(":");(n.length=3)?r.setHours(n[0],n[1],n[2]):(n.length=2)?r.setHours(n[0],n[1]):(n.length=1)&&r.setHours(n[0]);let u=new Date(eventos[i].DataFim),t=eventos[i].HoraFinal.split(":");(t.length=3)?u.setHours(t[0],t[1],t[2]):(t.length=2)?u.setHours(t[0],t[1]):(t.length=1)&&u.setHours(t[0]);s={id:eventos[i].Id,start:r,end:u,title:eventos[i].AlertarEventoMesmoDia===!0||eventos[i].Tipo===3?"* "+eventos[i].Descricao:eventos[i].Descricao,color:eventos[i].BgColor,tipo:eventos[i].Tipo};o.push(s)}if($("#lblFeriado").hide(),$("#tFeriados").hide(),n.feriados!==null&&n.feriados!==undefined&&n.feriados.length>0)for($("#tFeriados").show(),u=$("#tFeriados tbody"),u.empty(),r=0;r<n.feriados.length;r++){var f=new Date(n.feriados[r].DataFeriado),l=f.getDate().toString().padStart(2,"0"),a=(f.getMonth()+1).toString().padStart(2,"0"),v=f.getFullYear(),h=u[0].insertRow(u[0].rows.length),c=h.insertCell(0);c.innerHTML="<b>"+l+"/"+a+"/"+v+"<\/b>";c.style.width="20%";e=h.insertCell(1);e.innerHTML="<b>"+n.feriados[r].Descricao+"<\/b>";e.style.width="80%"}else $("#lblFeriado").show();t(o)})},eventClick:function(n){var t=n.event,i=t.id,r=t.extendedProps.tipo,u=urlEdit+"?id="+i+"&tipoEvento="+r;$.popUpUrl(u,600,900,function(){reloadCalendar()})},dateClick:function(n){if(n.date<new Date)$.bsMessageError("Atenção","Data escolhida é menor que a Data Atual!");else{var t=urlCreate+"?clickDate="+n.dateStr;$.popUpUrl(t,600,900,function(){reloadCalendar()})}}});calendar.render()}function FormatarData(n){var t=n.substr(0,10).split("-"),i=n.substr(11,19).split(":");return new Date(parseInt(t[0]),parseInt(t[1]),parseInt(t[2]),parseInt(i[0]),parseInt(i[1]),parseInt(i[2]))}$(function(){initCalendar()});
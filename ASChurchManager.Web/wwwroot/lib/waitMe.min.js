(function(n){n.fn.waitMe=function(t){return this.each(function(){var u=n(this),v,f,r,h=!1,o="background-color",s="",e="",c,i,l,a={init:function(){function g(n){b.css({top:"auto",transform:"translateY("+n+"px) translateZ(0)"})}var a,y,p,b;i=n.extend({effect:"bounce",text:"",bg:"rgba(255,255,255,0.7)",color:"#000",maxSize:"",source:"",onClose:function(){}},t);l=(new Date).getMilliseconds();c=n('<div class="waitMe" data-waitme_id="'+l+'"><\/div>');switch(i.effect){case"none":r=0;break;case"bounce":r=3;break;case"rotateplane":r=1;break;case"stretch":r=5;break;case"orbit":r=2;break;case"roundBounce":r=12;break;case"win8":r=5;h=!0;break;case"win8_linear":r=5;h=!0;break;case"ios":r=12;break;case"facebook":r=3;break;case"rotation":r=1;o="border-color";break;case"timer":r=2;a=n.isArray(i.color)?i.color[0]:i.color;s="border-color:"+a;break;case"pulse":r=1;o="border-color";break;case"progressBar":r=1;break;case"bouncePulse":r=3;break;case"img":r=1}if(""!==s&&(s+=";"),0<r){if("img"===i.effect)e='<img src="'+i.source+'">';else for(y=1;y<=r;++y)n.isArray(i.color)?(a=i.color[y],void 0==a&&(a="#000")):a=i.color,e=h?e+('<div class="waitMe_progress_elem'+y+'"><div style="'+o+":"+a+'"><\/div><\/div>'):e+('<div class="waitMe_progress_elem'+y+'" style="'+o+":"+a+'"><\/div>');f=n('<div class="waitMe_progress '+i.effect+'" style="'+s+'">'+e+"<\/div>")}if(i.text&&""===i.maxSize&&(a=n.isArray(i.color)?i.color[0]:i.color,v=n('<div class="waitMe_text" style="color:'+a+'">'+i.text+"<\/div>")),p=u.find("> .waitMe"),p&&p.remove(),a=n('<div class="waitMe_content"><\/div>'),a.append(f,v),c.append(a),"HTML"==u[0].tagName&&(u=n("body")),u.addClass("waitMe_container").attr("data-waitme_id",l).append(c),p=u.find("> .waitMe"),b=u.find(".waitMe_content"),p.css({background:i.bg}),b.css({marginTop:-b.outerHeight()/2+"px"}),""!==i.maxSize&&(y=f.outerHeight(),f.outerWidth(),"img"===i.effect?(f.css({height:i.maxSize+"px"}),f.find(">img").css({maxHeight:"100%"}),b.css({marginTop:-b.outerHeight()/2+"px"})):i.maxSize<y&&a.css({transform:"scale("+i.maxSize/y+")"})),u.outerHeight()>n(window).height()){var a=n(window).scrollTop(),w=b.outerHeight(),k=u.offset().top,d=u.outerHeight(),y=a-k+n(window).height()/2;0>y&&(y=Math.abs(y));0<=y-w&&y+w<=d?k-a>n(window).height()/2&&(y=w):y=a>k+d-w?a-k-w:a-k+w;g(y);n(document).scroll(function(){var t=n(window).scrollTop()-k+n(window).height()/2;0<=t-w&&t+w<=d&&g(t)})}p.on("destroyed",function(){i.onClose&&n.isFunction(i.onClose)&&i.onClose();p.trigger("close")});return n.event.special.destroyed={remove:function(n){n.handler&&n.handler()}},p},hide:function(){var n=u.attr("data-waitme_id");u.removeClass("waitMe_container").removeAttr("data-waitme_id");u.find('.waitMe[data-waitme_id="'+n+'"]').remove()}};return a[t]?a[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"==typeof t||!t?a.init.apply(this,arguments):void 0})};n(window).on("load",function(){n("body.waitMe_body").addClass("hideMe");setTimeout(function(){n("body.waitMe_body").find(".waitMe_container:not([data-waitme_id])").remove();n("body.waitMe_body").removeClass("waitMe_body hideMe")},200)})})(jQuery);